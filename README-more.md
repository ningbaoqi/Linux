### 处理数据文件
#### 排序数据
+ 默认情况下，`sort`命令按照会话指定的默认语言的排序规则对文本文件中的数据进行排序；

|常用的命令|功能|
|------|------|
|`sort -n 文件名`|表示将数字识别为数字而不是字符，并且按值排序|
|`sort -M filemane`|按月排序|

#### 搜索数据
+ 使用`grep`可以帮助查找数据，grep命令会在输入或指定文件中查找匹配指定模式字串的行，并将该行输出；grep命令的原型是：`grep [options] pattern [file]`；

|搜索数据grep常用的命令|功能|
|------|------|
|`grep 字符/字串 文件名`|在指定的文件名中查找字符/字串数据|
|`grep -v 字符/字串 文件名`|进行反向搜索（输出不匹配该字串/字符的行）|
|`grep -n 字符/字串 文件名`|显示匹配的行和行号|
|`grep -c 字符/字串 文件名`|显示有多少行匹配|
|`grep -e 字符/字串 -e 字符/字串 文件名`|匹配多个条件（或的关系）|

#### 压缩数据

|Linux文件压缩工具|文件扩展名|描述|
|------|------|------|
|`bzip2`|.bz2|采用Burrows-Wheeler块排序文本压缩算法和霍夫曼编码；bzip2 文件名 将会生成 文件名.bz2文件|
|`gzip`|.gz|GUN压缩工具，用Lempel-Ziv编码；gzip 文件名 将会生成 文件名.gz文件（可以使用通配符来批量压缩文件）；gunzip 以.gz后缀的文件 将会实现解压|
|`zip`|.zip|Windows上PKZIP工具的Unix实现；zip 文件名.zip 文件名  将会生成 文件名.zip文件；gzip是Linux上最流行的压缩工具|

+ gzip软件包包含以下工具：gzip：用来压缩文件；gzip命令会压缩你在命令行指定的文件，也可以在命令行指定多个文件名甚至使用通配符来一次性批量压缩文件如：`gzip filename`、`gzip file*names`；gzcat：用来查看压缩过的文本文件的内容；gunzip：用来解压文件；

#### 归档数据
+ tar命令的格式是：`tar function [options] object1 object2 .....`；

|function(功能)列表|长名称|描述|
|------|------|------|
|`-A`|--concatenate|将一个已有tar归档文件追加到另一个已有tar归档文件|
|`-c`|-create|创建一个新的tar归档文件|
|`-d`|--diff|检查归档文件和文件系统的不同之处|
|``|--delete|从已有tar归档文件中删除|
|`-r`|--append|追加文件到已有tar归档文件末尾|
|`-t`|--list|列出已有tar归档文件的内容|
|`-u`|--update|将比tar归档文件中已有的同名文件新的文件追加到该归档文件中|
|`-x`|--extract|从已有tar归档文件中提取文件|

+ tar的命令选项如下：

|tar命令的选项|描述|
|------|------|
|`-C dir`|切换到指定目录|
|`-f file`|输出结果到文件或设备file|
|`-j`|将输出重定向给bzip2命令来压缩内容|
|`-p`|保留所有文件权限|
|`-v`|在处理文件时显示文件|
|`-z`|将输出重定向给gzip命令来压缩内容|

+ 通常情况下function和命令选项可以混合使用如下：

|function和选项混合使用|
|------|
|`tar -cvf  sb.tar  test/  test2/`   生成sb.tar归档文件，包含test、test2目录|
|`tar -tf sb.tar` 将会列出归档文件的内容，但不提取文件|
|`tar -xvf sb.tar`  提取归档文件的内容|

+ 文件名为.tar.gz结尾的文件是gzip压缩过的tar文件；可以使用：`tar -zxvf filename.tar.gz`来解压；


### 监测磁盘空间
#### 挂载存储媒体
+ Linux文件系统将所有的磁盘都并入一个虚拟目录下，在使用新的存储媒体之前，需要把它放在虚拟目录下，这项工作称为挂载；
##### mount命令

|mount命令提供如下四部分信息|
|------|
|媒体的设备文件名|
|媒体挂载到虚拟目录的挂载点|
|文件系统类型|
|已挂载媒体的访问状态|

+ 原型 `mount -t type device derectory `；type参数指定了磁盘被格式化的文件系统类型；如手动将U盘/dev/sdb1挂载到/media/disk：`mount -t vfat /dev/sdb1 /media/disk`；

|文件系统类型字段|代表的文件系统| 
|------|------|
|`vfat`|Windows长文件系统 大部分U盘和软盘会被格式化为vfat文件系统，数据CD使用iso9660文件系统类型|
|`ntfs`|Windows NT 、XP、Vista以及Windows 7 中广泛使用的高级文件系统|
|`iso9660`|标准的CD-ROM文件系统|

+ 大多数U盘和软盘会被格式化成vfat文件系统，而数据CD则必须使用ios9660文件系统类型；

|mount命令的参数|描述|
|------|------|
|`-a`|挂载/etc/fstab文件中指定的所有文件系统|
|`-f`|使用mount命令模拟挂载设备，但是不真的挂载|
|`-F`|和-a参数一起使用时，会同时挂载所有文件系统|
|`-v`|详细模式将会说明挂载设备的每一步|
|`-I`|不启用任何/sbin/mount.filessystem下的文件系统帮助文件|
|`-l`|给ext2、ext3或XFS文件系统自动添加文件系统标签|
|`-n`|挂载设备，但不注册到/etc/mtab已挂载设备文件中|
|`-p num`|进行加密挂载时，从文件描述符num中获取密码短语|
|`-s`|忽略该文件系统不支持的挂载选项|
|`-r`|将设备挂载为只读的|
|`-w`|将设备挂载为可读写的|
|`-L label`|将设备按指定的label挂载|
|`-U uuid`|将设备按指定的uuid挂载|
|`-O`|和-a参数一起使用，限制命令只作用到特定的一组文件系统上|
|`-o`|给文件系统添加特定的选项；该参数允许在挂载文件系统时添加一些以逗号分隔的额外选项如：ro：以只读形式挂载；rw：以读写形式挂载；user：允许普通用户挂载文件系统；check=none：挂载文件系统时不进行完整性校验；loop：挂载一个文件|

##### umount命令
+ 从Linux系统上移除一个可移动设备时，不能直接从系统上移除，而应该先卸载；umount命令支持通过设备文件或挂载点来指定要卸载的设备如果有任何程序正在使用设备上的文件，系统就不会允许卸载它；命令的原型`umount [ directory | device ]`；如：`umount /home/rich/mnt`；如果在卸载设备时，系统提示设备繁忙，无法卸载设备，通常是有进程还在访问该设备或使用设备上的文件，这时可以使用lsof命令获取使用它的进程信息，然后在应用中停止使用该设备或停止该进程；lsof的用法是：`lsof /path/to/device/node`；
##### 使用df命令
+  `df`命令会显示每个有数据的已挂载文件系统，一般常用的参数为-h，他会把输出中的磁盘空间按照用户易读的形式显示，M表示兆字节，G表示吉字节；
##### 使用du命令
+ `du`命令可以显示某个特定目录（默认情况下为当前目录）的磁盘使用情况；

|du命令的常用参数|描述|
|------|------|
|`-c`|显示所有已列出文件总的大小|
|`-h`|按读者易读的形势输出大小，用K代表千字节等|
|`-s`|显示每个输出参数的总计|

### 监测程序
#### 探查进程
+ 当程序运行在系统上时，我们称之为进程；ps 默认情况下只会显示运行在当前控制台下的属于当前用户的进程，显示了程序的进程ID（PID）,他们运行在哪个终端（TTY）上以及进程已用的CPU时间；
##### ps命令参数表

|参数|说明|
|------|------|
|`T`|显示跟当前终端关联的所有进程|
|`a`|显示跟任意终端关联的所有进程|
|`g`|显示所有的进程，包括控制进程|
|`r`|仅显示运行中的进程|
|`x`|显示所有进程，甚至包括未分配任何终端的进程|
|`X`|按过去的Linuxi386寄存器格式显示|
|`Z`|将安全信息添加到输出中|
|`j`|显示任务信息|
|`l`|显示长模式|
|`s`|采用信号格式显示|
|`u`|采用基于用户的格式显示|
|`v`|采用虚拟内存格式显示|
|`S`|将数值信息从子进程加到父进程上，比如CPU和内存的使用情况|
|`c`|显示真实的目录名称|
|`e`|显示命令使用的环境变量|
|`f`|用分层格式来显示进程，表明哪些进程启动了哪些进程|
|`h`|不显示头信息|
|`n`|和WCHAN信息一起显示出来，用数值来表示用户ID 和组ID|
|`H`|将线程按进程来显示|
|`m`|在进程后显示线程|
|`L`|列出所有格式指定符|
|`V`|显示ps目录的版本号|
|`-A`|显示所有进程|
|`-N`|显示与指定参数不符的所有进程|
|`-a`|显示除控制进程和无终端进程外的所有进程|
|`-d`|显示除控制进程外的所有进程|
|`-e`|显示所有进程|
|`-F`|显示更多额外输出|
|`-M`|显示进程的安全信息|
|`-c`|显示进程的额外调度器信息|
|`-f`|显示完整格式的输出|
|`-j`|显示任务信息|
|`-l`|显示长列表|
|`-L`|显示进程中的线程|
|`-V`|显示ps命令的版本号|
|`--deselect`|显示所有进程，命令行中列出的进程|
|`--context`|显示额外的安全信息|
|`--cols 数字`|将屏幕宽度设置为指定数字的列|
|`--columns 数字`|将屏幕宽度设置为指定数字的列|
|`--cumulative`|包含已停止的子进程的信息|
|`--forest`|用层级结构显示出进程和父进程之间的关系|
|`--headers`|在每页输出中都显示列的头|
|`--no-headers`|不显示列的头|
|`--help`|显示帮助信息|
|`--info`|显示调试信息|
|`--version`|显示ps目录的版本号|

+ 如果想查看系统上运行的所有进程，可以使用-ef参数组合，具体的参数组合查询上表；

##### ps显示信息意义表

|字段|含义|
|------|------|
|`UID`|启动这些进程的用户|
|`PID`|进程的进程ID|
|`PPID`|父进程的进程号|
|`C`|进程生命周期中的CPU利用率|
|`STIME`|进程启动时的系统时间|
|`TTY`|进程启动时的终端设备|
|`TIME`|运行进程需要的累积CPU时间|
|`CMD`|启动的程序名称|
|`F`|内核分配给进程的系统标记|
|`S`|进程的状态（O代表正在运行，S代表在休眠，R代表正运行正等待运行，Z代表僵化，进程已结束但父进程已不存在，T代表停止）|
|`PRI`|进程的优先级（越大的数字代表越低的优先级）|
|`NI`|谦让度值用来参与决定优先级|
|`ADDR`|进程的内存地址|
|`SZ`|加入进程被换出，所需交换空间的大致大小|
|`WCHAN`|进程休眠的内核函数的地址|
|`VSZ`|进程在内存中的大小|
|`RSS`|进程在未换出时占用的物理内存|
|`STAT`|代表当前进程状态的双字符状态码|

### 实时监测进程
+  top命令实时显示进程信息；
#### top进程信息含义表

|字段|含义|
|------|------|
|`PID`|进程的ID|
|`USER`|进程属主的名字|
|`PR`|进程的优先级|
|`NI`|进程的谦让度值|
|`VIRT`|进程占用的虚拟内存总量|
|`RES`|进程所占的物理内存总量|
|`SHR`|进程和其他进程共享的内存总量|
|`S`|进程的状态（D代表可中断的休眠状态， R代表正在运行状态 ， S 代表休眠状态，T 代表跟踪状态或停止状态，Z代表僵化状态）|
|`%CPU`|进程使用的CPU时间比例|
|`%MEM`|进程使用的内存占可用内存的比例|
|`TIME+`|自进程启动到目前为止的CPU时间总量|
|`COMMAND`|进程所对应的命令行名称，也就是启动的程序名|

### 结束进程
#### Linux进程信号

|信号|名称|描述|
|------|------|------|
|1|HUP|挂起|
|2|INT|中断|
|3|QUIT|结束运行|
|9|KILL|无条件终止|
|11|SEGV|段错误|
|15|TERM|尽可能终止|
|17|STOP|无条件停止运行，但不终止|
|18|TSTP|停止或暂停，但继续在后台运行|
|19|CONT|在STOP 或TSTP之后恢复执行|

#### kill命令
+ `kill`命令可通过进程ID给进程发信号，默认情况下，kill命令会向命令行中列出全部PID发送一个TERM信号；

|kill命令的使用|
|------|
|`kill PID`|
|`kill -s HUP(信号名或信号值) PID `强制终止|

#### killall命令
+ `killall`命令支持通过进程名而不是PID来结束进程，killall命令也支持通配符，如：` killall 进程名（不支持PID，结束进程，支持通配符，如：killall eclip*）`；
